import{a as e,h as t,p as a,s,o as l,c,w as d,i as r,b as i,d as o,k as u,t as n,e as f,r as _,F as m,j as p,f as g,g as k}from"./index-69b6f7cc.js";import{S as b}from"./storage.1da4c71f.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";const h=x({data:()=>({order:null,orderId:null}),onLoad(e){this.orderId=e.orderId,this.loadOrderDetail()},methods:{loadOrderDetail(){const e=b.getOrders();this.order=e.find(e=>e.id==this.orderId)},getStatusText:e=>({pending:"å¾…å¤„ç†",preparing:"åˆ¶ä½œä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"}[e]||"æœªçŸ¥çŠ¶æ€"),getStatusClass:e=>`status-${e}`,getStatusEmoji:e=>({pending:"â³",preparing:"ğŸ‘¨â€ğŸ³",completed:"âœ…",cancelled:"âŒ"}[e]||"â“"),getStatusTitle:e=>({pending:"è®¢å•å·²æäº¤",preparing:"æ­£åœ¨åˆ¶ä½œä¸­",completed:"è®¢å•å·²å®Œæˆ",cancelled:"è®¢å•å·²å–æ¶ˆ"}[e]||"æœªçŸ¥çŠ¶æ€"),getStatusDesc:e=>({pending:"æ‚¨çš„è®¢å•å·²æäº¤ï¼Œæ­£åœ¨ç­‰å¾…å¤„ç†",preparing:"å¨å¸ˆæ­£åœ¨ç”¨å¿ƒä¸ºæ‚¨åˆ¶ä½œç¾é£Ÿ",completed:"æ‚¨çš„è®¢å•å·²å®Œæˆï¼Œæ„Ÿè°¢æ‚¨çš„å…‰ä¸´",cancelled:"è®¢å•å·²å–æ¶ˆï¼Œå¦‚æœ‰ç–‘é—®è¯·è”ç³»å®¢æœ"}[e]||"çŠ¶æ€æè¿°"),cancelOrder(){e({title:"ç¡®è®¤å–æ¶ˆ",content:"ç¡®å®šè¦å–æ¶ˆè¿™ä¸ªè®¢å•å—ï¼Ÿ",success:e=>{if(e.confirm){b.updateOrder(this.order.id,{status:"cancelled"})&&(this.order.status="cancelled",t({title:"è®¢å•å·²å–æ¶ˆ",icon:"success",success:()=>{setTimeout(()=>{a()},1500)}}))}}})},reorder(){b.clearCart();const e=this.order.items.map(e=>({...e,quantity:e.quantity}));b.saveCart(e),t({title:"å·²æ·»åŠ åˆ°è´­ç‰©è½¦",icon:"success",success:()=>{setTimeout(()=>{s({url:"/pages/menu/menu"})},1500)}})},goBack(){a({delta:1,fail(){s({url:"/pages/order/order"})}})}}},[["render",function(e,t,a,s,b,x){const h=g,y=r,C=k;return b.order?(l(),c(y,{key:0,class:"container"},{default:d(()=>[i(y,{class:"header-bar"},{default:d(()=>[i(y,{class:"back-button",onClick:x.goBack},{default:d(()=>[i(h,{class:"back-icon"},{default:d(()=>[o("â†")]),_:1}),i(h,{class:"back-text"},{default:d(()=>[o("è¿”å›")]),_:1})]),_:1},8,["onClick"]),i(h,{class:"page-title"},{default:d(()=>[o("è®¢å•è¯¦æƒ…")]),_:1})]),_:1}),i(y,{class:"status-section"},{default:d(()=>[i(y,{class:u(["status-icon",x.getStatusClass(b.order.status)])},{default:d(()=>[i(h,{class:"status-emoji"},{default:d(()=>[o(n(x.getStatusEmoji(b.order.status)),1)]),_:1})]),_:1},8,["class"]),i(y,{class:"status-info"},{default:d(()=>[i(h,{class:"status-title"},{default:d(()=>[o(n(x.getStatusTitle(b.order.status)),1)]),_:1}),i(h,{class:"status-desc"},{default:d(()=>[o(n(x.getStatusDesc(b.order.status)),1)]),_:1})]),_:1})]),_:1}),i(y,{class:"order-info-section"},{default:d(()=>[i(y,{class:"info-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("è®¢å•ä¿¡æ¯")]),_:1})]),_:1}),i(y,{class:"info-item"},{default:d(()=>[i(h,{class:"info-label"},{default:d(()=>[o("è®¢å•å·")]),_:1}),i(h,{class:"info-value"},{default:d(()=>[o(n(b.order.orderNumber),1)]),_:1})]),_:1}),i(y,{class:"info-item"},{default:d(()=>[i(h,{class:"info-label"},{default:d(()=>[o("ä¸‹å•æ—¶é—´")]),_:1}),i(h,{class:"info-value"},{default:d(()=>[o(n(b.order.createTime),1)]),_:1})]),_:1}),i(y,{class:"info-item"},{default:d(()=>[i(h,{class:"info-label"},{default:d(()=>[o("è®¢å•çŠ¶æ€")]),_:1}),i(h,{class:u(["info-value status-text",x.getStatusClass(b.order.status)])},{default:d(()=>[o(n(x.getStatusText(b.order.status)),1)]),_:1},8,["class"])]),_:1})]),_:1}),i(y,{class:"items-section"},{default:d(()=>[i(y,{class:"section-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("å•†å“æ˜ç»†")]),_:1})]),_:1}),i(y,{class:"items-list"},{default:d(()=>[(l(!0),f(m,null,_(b.order.items,e=>(l(),c(y,{class:"item-row",key:e.id},{default:d(()=>[i(C,{class:"item-image",src:e.image,mode:"aspectFill"},null,8,["src"]),i(y,{class:"item-detail"},{default:d(()=>[i(h,{class:"item-name"},{default:d(()=>[o(n(e.name),1)]),_:2},1024),i(h,{class:"item-desc"},{default:d(()=>[o(n(e.description),1)]),_:2},1024),i(y,{class:"item-bottom"},{default:d(()=>[i(h,{class:"item-price"},{default:d(()=>[o("ï¿¥"+n(e.price.toFixed(2)),1)]),_:2},1024),i(h,{class:"item-quantity"},{default:d(()=>[o("x"+n(e.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(h,{class:"item-total"},{default:d(()=>[o("ï¿¥"+n((e.price*e.quantity).toFixed(2)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),b.order.remark?(l(),c(y,{key:0,class:"remark-section"},{default:d(()=>[i(y,{class:"section-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("å¤‡æ³¨ä¿¡æ¯")]),_:1})]),_:1}),i(y,{class:"remark-content"},{default:d(()=>[i(h,{class:"remark-text"},{default:d(()=>[o(n(b.order.remark),1)]),_:1})]),_:1})]),_:1})):p("",!0),i(y,{class:"price-section"},{default:d(()=>[i(y,{class:"section-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("è´¹ç”¨æ˜ç»†")]),_:1})]),_:1}),i(y,{class:"price-detail"},{default:d(()=>[i(y,{class:"price-row"},{default:d(()=>[i(h,{class:"price-label"},{default:d(()=>[o("å•†å“æ€»ä»·")]),_:1}),i(h,{class:"price-value"},{default:d(()=>[o("ï¿¥"+n(b.order.totalPrice.toFixed(2)),1)]),_:1})]),_:1}),i(y,{class:"price-row"},{default:d(()=>[i(h,{class:"price-label"},{default:d(()=>[o("é…é€è´¹")]),_:1}),i(h,{class:"price-value"},{default:d(()=>[o("ï¿¥0.00")]),_:1})]),_:1}),i(y,{class:"price-row total-row"},{default:d(()=>[i(h,{class:"price-label"},{default:d(()=>[o("å®ä»˜é‡‘é¢")]),_:1}),i(h,{class:"price-value total-price"},{default:d(()=>[o("ï¿¥"+n(b.order.totalPrice.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(y,{class:"action-section"},{default:d(()=>["pending"===b.order.status?(l(),c(y,{key:0,class:"action-btn cancel-btn",onClick:x.cancelOrder},{default:d(()=>[i(h,{class:"btn-text"},{default:d(()=>[o("å–æ¶ˆè®¢å•")]),_:1})]),_:1},8,["onClick"])):p("",!0),"completed"===b.order.status?(l(),c(y,{key:1,class:"action-btn reorder-btn",onClick:x.reorder},{default:d(()=>[i(h,{class:"btn-text"},{default:d(()=>[o("å†æ¥ä¸€å•")]),_:1})]),_:1},8,["onClick"])):p("",!0)]),_:1})]),_:1})):(l(),c(y,{key:1,class:"empty-state"},{default:d(()=>[i(y,{class:"header-bar"},{default:d(()=>[i(y,{class:"back-button",onClick:x.goBack},{default:d(()=>[i(h,{class:"back-icon"},{default:d(()=>[o("â†")]),_:1}),i(h,{class:"back-text"},{default:d(()=>[o("è¿”å›")]),_:1})]),_:1},8,["onClick"]),i(h,{class:"page-title"},{default:d(()=>[o("è®¢å•è¯¦æƒ…")]),_:1})]),_:1}),i(y,{class:"empty-content"},{default:d(()=>[i(y,{class:"empty-icon"},{default:d(()=>[o("ğŸ˜…")]),_:1}),i(h,{class:"empty-text"},{default:d(()=>[o("è®¢å•ä¸å­˜åœ¨")]),_:1}),i(y,{class:"back-btn",onClick:x.goBack},{default:d(()=>[i(h,{class:"back-text"},{default:d(()=>[o("è¿”å›è®¢å•åˆ—è¡¨")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}))}],["__scopeId","data-v-eedf55cc"]]);export{h as default};
