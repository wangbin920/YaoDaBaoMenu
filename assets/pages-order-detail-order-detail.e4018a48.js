import{a as e,h as t,p as a,s,o as l,c,w as d,i as r,b as i,d as o,k as u,t as n,e as f,r as _,F as m,j as p,f as g,g as k}from"./index-69b6f7cc.js";import{S as b}from"./storage.1da4c71f.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";const h=x({data:()=>({order:null,orderId:null}),onLoad(e){this.orderId=e.orderId,this.loadOrderDetail()},methods:{loadOrderDetail(){const e=b.getOrders();this.order=e.find(e=>e.id==this.orderId)},getStatusText:e=>({pending:"待处理",preparing:"制作中",completed:"已完成",cancelled:"已取消"}[e]||"未知状态"),getStatusClass:e=>`status-${e}`,getStatusEmoji:e=>({pending:"⏳",preparing:"👨‍🍳",completed:"✅",cancelled:"❌"}[e]||"❓"),getStatusTitle:e=>({pending:"订单已提交",preparing:"正在制作中",completed:"订单已完成",cancelled:"订单已取消"}[e]||"未知状态"),getStatusDesc:e=>({pending:"您的订单已提交，正在等待处理",preparing:"厨师正在用心为您制作美食",completed:"您的订单已完成，感谢您的光临",cancelled:"订单已取消，如有疑问请联系客服"}[e]||"状态描述"),cancelOrder(){e({title:"确认取消",content:"确定要取消这个订单吗？",success:e=>{if(e.confirm){b.updateOrder(this.order.id,{status:"cancelled"})&&(this.order.status="cancelled",t({title:"订单已取消",icon:"success",success:()=>{setTimeout(()=>{a()},1500)}}))}}})},reorder(){b.clearCart();const e=this.order.items.map(e=>({...e,quantity:e.quantity}));b.saveCart(e),t({title:"已添加到购物车",icon:"success",success:()=>{setTimeout(()=>{s({url:"/pages/menu/menu"})},1500)}})},goBack(){a({delta:1,fail(){s({url:"/pages/order/order"})}})}}},[["render",function(e,t,a,s,b,x){const h=g,y=r,C=k;return b.order?(l(),c(y,{key:0,class:"container"},{default:d(()=>[i(y,{class:"header-bar"},{default:d(()=>[i(y,{class:"back-button",onClick:x.goBack},{default:d(()=>[i(h,{class:"back-icon"},{default:d(()=>[o("←")]),_:1}),i(h,{class:"back-text"},{default:d(()=>[o("返回")]),_:1})]),_:1},8,["onClick"]),i(h,{class:"page-title"},{default:d(()=>[o("订单详情")]),_:1})]),_:1}),i(y,{class:"status-section"},{default:d(()=>[i(y,{class:u(["status-icon",x.getStatusClass(b.order.status)])},{default:d(()=>[i(h,{class:"status-emoji"},{default:d(()=>[o(n(x.getStatusEmoji(b.order.status)),1)]),_:1})]),_:1},8,["class"]),i(y,{class:"status-info"},{default:d(()=>[i(h,{class:"status-title"},{default:d(()=>[o(n(x.getStatusTitle(b.order.status)),1)]),_:1}),i(h,{class:"status-desc"},{default:d(()=>[o(n(x.getStatusDesc(b.order.status)),1)]),_:1})]),_:1})]),_:1}),i(y,{class:"order-info-section"},{default:d(()=>[i(y,{class:"info-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("订单信息")]),_:1})]),_:1}),i(y,{class:"info-item"},{default:d(()=>[i(h,{class:"info-label"},{default:d(()=>[o("订单号")]),_:1}),i(h,{class:"info-value"},{default:d(()=>[o(n(b.order.orderNumber),1)]),_:1})]),_:1}),i(y,{class:"info-item"},{default:d(()=>[i(h,{class:"info-label"},{default:d(()=>[o("下单时间")]),_:1}),i(h,{class:"info-value"},{default:d(()=>[o(n(b.order.createTime),1)]),_:1})]),_:1}),i(y,{class:"info-item"},{default:d(()=>[i(h,{class:"info-label"},{default:d(()=>[o("订单状态")]),_:1}),i(h,{class:u(["info-value status-text",x.getStatusClass(b.order.status)])},{default:d(()=>[o(n(x.getStatusText(b.order.status)),1)]),_:1},8,["class"])]),_:1})]),_:1}),i(y,{class:"items-section"},{default:d(()=>[i(y,{class:"section-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("商品明细")]),_:1})]),_:1}),i(y,{class:"items-list"},{default:d(()=>[(l(!0),f(m,null,_(b.order.items,e=>(l(),c(y,{class:"item-row",key:e.id},{default:d(()=>[i(C,{class:"item-image",src:e.image,mode:"aspectFill"},null,8,["src"]),i(y,{class:"item-detail"},{default:d(()=>[i(h,{class:"item-name"},{default:d(()=>[o(n(e.name),1)]),_:2},1024),i(h,{class:"item-desc"},{default:d(()=>[o(n(e.description),1)]),_:2},1024),i(y,{class:"item-bottom"},{default:d(()=>[i(h,{class:"item-price"},{default:d(()=>[o("￥"+n(e.price.toFixed(2)),1)]),_:2},1024),i(h,{class:"item-quantity"},{default:d(()=>[o("x"+n(e.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(h,{class:"item-total"},{default:d(()=>[o("￥"+n((e.price*e.quantity).toFixed(2)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),b.order.remark?(l(),c(y,{key:0,class:"remark-section"},{default:d(()=>[i(y,{class:"section-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("备注信息")]),_:1})]),_:1}),i(y,{class:"remark-content"},{default:d(()=>[i(h,{class:"remark-text"},{default:d(()=>[o(n(b.order.remark),1)]),_:1})]),_:1})]),_:1})):p("",!0),i(y,{class:"price-section"},{default:d(()=>[i(y,{class:"section-header"},{default:d(()=>[i(h,{class:"section-title"},{default:d(()=>[o("费用明细")]),_:1})]),_:1}),i(y,{class:"price-detail"},{default:d(()=>[i(y,{class:"price-row"},{default:d(()=>[i(h,{class:"price-label"},{default:d(()=>[o("商品总价")]),_:1}),i(h,{class:"price-value"},{default:d(()=>[o("￥"+n(b.order.totalPrice.toFixed(2)),1)]),_:1})]),_:1}),i(y,{class:"price-row"},{default:d(()=>[i(h,{class:"price-label"},{default:d(()=>[o("配送费")]),_:1}),i(h,{class:"price-value"},{default:d(()=>[o("￥0.00")]),_:1})]),_:1}),i(y,{class:"price-row total-row"},{default:d(()=>[i(h,{class:"price-label"},{default:d(()=>[o("实付金额")]),_:1}),i(h,{class:"price-value total-price"},{default:d(()=>[o("￥"+n(b.order.totalPrice.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(y,{class:"action-section"},{default:d(()=>["pending"===b.order.status?(l(),c(y,{key:0,class:"action-btn cancel-btn",onClick:x.cancelOrder},{default:d(()=>[i(h,{class:"btn-text"},{default:d(()=>[o("取消订单")]),_:1})]),_:1},8,["onClick"])):p("",!0),"completed"===b.order.status?(l(),c(y,{key:1,class:"action-btn reorder-btn",onClick:x.reorder},{default:d(()=>[i(h,{class:"btn-text"},{default:d(()=>[o("再来一单")]),_:1})]),_:1},8,["onClick"])):p("",!0)]),_:1})]),_:1})):(l(),c(y,{key:1,class:"empty-state"},{default:d(()=>[i(y,{class:"header-bar"},{default:d(()=>[i(y,{class:"back-button",onClick:x.goBack},{default:d(()=>[i(h,{class:"back-icon"},{default:d(()=>[o("←")]),_:1}),i(h,{class:"back-text"},{default:d(()=>[o("返回")]),_:1})]),_:1},8,["onClick"]),i(h,{class:"page-title"},{default:d(()=>[o("订单详情")]),_:1})]),_:1}),i(y,{class:"empty-content"},{default:d(()=>[i(y,{class:"empty-icon"},{default:d(()=>[o("😅")]),_:1}),i(h,{class:"empty-text"},{default:d(()=>[o("订单不存在")]),_:1}),i(y,{class:"back-btn",onClick:x.goBack},{default:d(()=>[i(h,{class:"back-text"},{default:d(()=>[o("返回订单列表")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}))}],["__scopeId","data-v-eedf55cc"]]);export{h as default};
