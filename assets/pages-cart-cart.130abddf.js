import{a as t,h as e,s as a,o as s,c as l,w as c,i as r,b as i,e as o,r as n,F as u,d,t as m,f,m as _,g as p}from"./index-69b6f7cc.js";import{S as h}from"./storage.1da4c71f.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";const C=k({data:()=>({cartItems:[],remark:"",totalPrice:0}),onLoad(){this.loadCart()},onShow(){this.loadCart()},methods:{loadCart(){this.cartItems=h.getCart(),this.calculateTotal()},calculateTotal(){this.totalPrice=this.cartItems.reduce((t,e)=>t+e.price*e.quantity,0)},increaseQuantity(t){t.quantity+=1,this.saveCart()},decreaseQuantity(t){t.quantity>1?(t.quantity-=1,this.saveCart()):this.removeItem(t)},removeItem(e){t({title:"Á°ÆËÆ§ÁßªÈô§",content:`Á°ÆÂÆöË¶ÅÁßªÈô§ ${e.name} ÂêóÔºü`,success:t=>{if(t.confirm){const t=this.cartItems.findIndex(t=>t.id===e.id);t>-1&&(this.cartItems.splice(t,1),this.saveCart())}}})},saveCart(){h.saveCart(this.cartItems),this.calculateTotal()},checkout(){if(0===this.cartItems.length)return void e({title:"Ë¥≠Áâ©ËΩ¶‰∏∫Á©∫",icon:"none"});const t={id:Date.now(),items:JSON.parse(JSON.stringify(this.cartItems)),remark:this.remark,totalPrice:this.totalPrice,status:"pending",createTime:(new Date).toLocaleString(),orderNumber:"YDB"+Date.now()};h.addOrder(t),h.clearCart(),this.cartItems=[],this.remark="",this.calculateTotal(),e({title:"‰∏ãÂçïÊàêÂäüÔºÅ",icon:"success",duration:2e3,success:()=>{setTimeout(()=>{a({url:"/pages/order/order"})},1500)}})},goToMenu(){a({url:"/pages/menu/menu"})}}},[["render",function(t,e,a,h,k,C){const y=p,g=f,v=r,I=_;return s(),l(v,{class:"container"},{default:c(()=>[k.cartItems.length>0?(s(),l(v,{key:0,class:"cart-content"},{default:c(()=>[i(v,{class:"cart-list"},{default:c(()=>[(s(!0),o(u,null,n(k.cartItems,t=>(s(),l(v,{class:"cart-item",key:t.id},{default:c(()=>[i(y,{class:"item-image",src:t.image,mode:"aspectFill"},null,8,["src"]),i(v,{class:"item-info"},{default:c(()=>[i(g,{class:"item-name"},{default:c(()=>[d(m(t.name),1)]),_:2},1024),i(g,{class:"item-desc"},{default:c(()=>[d(m(t.description),1)]),_:2},1024),i(g,{class:"item-price"},{default:c(()=>[d("Ôø•"+m(t.price),1)]),_:2},1024)]),_:2},1024),i(v,{class:"item-controls"},{default:c(()=>[i(v,{class:"quantity-control"},{default:c(()=>[i(v,{class:"control-btn",onClick:e=>C.decreaseQuantity(t)},{default:c(()=>[d("-")]),_:2},1032,["onClick"]),i(g,{class:"quantity"},{default:c(()=>[d(m(t.quantity),1)]),_:2},1024),i(v,{class:"control-btn",onClick:e=>C.increaseQuantity(t)},{default:c(()=>[d("+")]),_:2},1032,["onClick"])]),_:2},1024),i(v,{class:"remove-btn",onClick:e=>C.removeItem(t)},{default:c(()=>[i(g,{class:"remove-text"},{default:c(()=>[d("ÁßªÈô§")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),i(v,{class:"remark-section"},{default:c(()=>[i(v,{class:"section-title"},{default:c(()=>[d("Â§áÊ≥®‰ø°ÊÅØ")]),_:1}),i(I,{class:"remark-input",placeholder:"ËØ∑ËæìÂÖ•Â§áÊ≥®‰ø°ÊÅØÔºàÈÄâÂ°´Ôºâ",modelValue:k.remark,"onUpdate:modelValue":e[0]||(e[0]=t=>k.remark=t),maxlength:"100"},null,8,["modelValue"])]),_:1}),i(v,{class:"checkout-section"},{default:c(()=>[i(v,{class:"price-info"},{default:c(()=>[i(v,{class:"price-row"},{default:c(()=>[i(g,{class:"price-label"},{default:c(()=>[d("ÂïÜÂìÅÊÄª‰ª∑")]),_:1}),i(g,{class:"price-value"},{default:c(()=>[d("Ôø•"+m(k.totalPrice.toFixed(2)),1)]),_:1})]),_:1}),i(v,{class:"price-row"},{default:c(()=>[i(g,{class:"price-label"},{default:c(()=>[d("ÈÖçÈÄÅË¥π")]),_:1}),i(g,{class:"price-value"},{default:c(()=>[d("Ôø•0.00")]),_:1})]),_:1}),i(v,{class:"price-row total-row"},{default:c(()=>[i(g,{class:"price-label"},{default:c(()=>[d("ÂêàËÆ°")]),_:1}),i(g,{class:"price-value total-price"},{default:c(()=>[d("Ôø•"+m(k.totalPrice.toFixed(2)),1)]),_:1})]),_:1})]),_:1}),i(v,{class:"checkout-btn",onClick:C.checkout},{default:c(()=>[i(g,{class:"checkout-text"},{default:c(()=>[d("Á´ãÂç≥‰∏ãÂçï")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})):(s(),l(v,{key:1,class:"empty-cart"},{default:c(()=>[i(v,{class:"empty-icon"},{default:c(()=>[d("üõí")]),_:1}),i(g,{class:"empty-text"},{default:c(()=>[d("Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑ")]),_:1}),i(g,{class:"empty-desc"},{default:c(()=>[d("Âø´ÂéªÈÄâË¥≠ÁæéÂë≥ÁöÑÈ£üÁâ©Âêß")]),_:1}),i(v,{class:"go-menu-btn",onClick:C.goToMenu},{default:c(()=>[i(g,{class:"go-menu-text"},{default:c(()=>[d("ÂéªÁÇπÈ§ê")]),_:1})]),_:1},8,["onClick"])]),_:1}))]),_:1})}],["__scopeId","data-v-fea8ecf7"]]);export{C as default};
