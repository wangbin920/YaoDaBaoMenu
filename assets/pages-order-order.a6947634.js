import{n as e,a as t,h as a,s,o as l,c as r,w as d,i as o,b as c,e as i,r as u,F as n,d as m,f,t as _,k as p,j as g,l as k,g as y}from"./index-69b6f7cc.js";import{S as x}from"./storage.1da4c71f.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const O=b({data:()=>({orders:[]}),onLoad(){this.loadOrders()},onShow(){this.loadOrders()},methods:{loadOrders(){this.orders=x.getOrders()},getStatusText:e=>({pending:"ÂæÖÂ§ÑÁêÜ",preparing:"Âà∂‰Ωú‰∏≠",completed:"Â∑≤ÂÆåÊàê",cancelled:"Â∑≤ÂèñÊ∂à"}[e]||"Êú™Áü•Áä∂ÊÄÅ"),getStatusClass:e=>`status-${e}`,getTotalItems:e=>e.items.reduce((e,t)=>e+t.quantity,0),goToOrderDetail(t){e({url:`/pages/order-detail/order-detail?orderId=${t.id}`})},cancelOrder(e){t({title:"Á°ÆËÆ§ÂèñÊ∂à",content:"Á°ÆÂÆöË¶ÅÂèñÊ∂àËøô‰∏™ËÆ¢ÂçïÂêóÔºü",success:t=>{if(t.confirm){x.updateOrder(e.id,{status:"cancelled"})&&(e.status="cancelled",this.loadOrders(),a({title:"ËÆ¢ÂçïÂ∑≤ÂèñÊ∂à",icon:"success"}))}}})},goToMenu(){s({url:"/pages/menu/menu"})}}},[["render",function(e,t,a,s,x,b){const O=f,h=o,C=y;return l(),r(h,{class:"container"},{default:d(()=>[x.orders.length>0?(l(),r(h,{key:0,class:"order-content"},{default:d(()=>[c(h,{class:"order-list"},{default:d(()=>[(l(!0),i(n,null,u(x.orders,e=>(l(),r(h,{class:"order-item",key:e.id,onClick:t=>b.goToOrderDetail(e)},{default:d(()=>[c(h,{class:"order-header"},{default:d(()=>[c(h,{class:"order-info"},{default:d(()=>[c(O,{class:"order-number"},{default:d(()=>[m("ËÆ¢ÂçïÂè∑Ôºö"+_(e.orderNumber),1)]),_:2},1024),c(O,{class:"order-time"},{default:d(()=>[m(_(e.createTime),1)]),_:2},1024)]),_:2},1024),c(h,{class:p(["order-status",b.getStatusClass(e.status)])},{default:d(()=>[c(O,{class:"status-text"},{default:d(()=>[m(_(b.getStatusText(e.status)),1)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024),c(h,{class:"order-items"},{default:d(()=>[(l(!0),i(n,null,u(e.items,(e,t)=>(l(),r(h,{class:"item-row",key:e.id},{default:d(()=>[c(C,{class:"item-image",src:e.image,mode:"aspectFill"},null,8,["src"]),c(h,{class:"item-detail"},{default:d(()=>[c(O,{class:"item-name"},{default:d(()=>[m(_(e.name),1)]),_:2},1024),c(O,{class:"item-quantity"},{default:d(()=>[m("x"+_(e.quantity),1)]),_:2},1024)]),_:2},1024),c(O,{class:"item-price"},{default:d(()=>[m("Ôø•"+_((e.price*e.quantity).toFixed(2)),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),e.remark?(l(),r(h,{key:0,class:"order-remark"},{default:d(()=>[c(O,{class:"remark-label"},{default:d(()=>[m("Â§áÊ≥®Ôºö")]),_:1}),c(O,{class:"remark-text"},{default:d(()=>[m(_(e.remark),1)]),_:2},1024)]),_:2},1024)):g("",!0),c(h,{class:"order-footer"},{default:d(()=>[c(O,{class:"total-items"},{default:d(()=>[m("ÂÖ±"+_(b.getTotalItems(e))+"‰ª∂ÂïÜÂìÅ",1)]),_:2},1024),c(O,{class:"total-price"},{default:d(()=>[m("ÂêàËÆ°ÔºöÔø•"+_(e.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),c(h,{class:"order-actions"},{default:d(()=>["pending"===e.status?(l(),r(h,{key:0,class:"action-btn cancel-btn",onClick:k(t=>b.cancelOrder(e),["stop"])},{default:d(()=>[c(O,{class:"btn-text"},{default:d(()=>[m("ÂèñÊ∂àËÆ¢Âçï")]),_:1})]),_:2},1032,["onClick"])):g("",!0),c(h,{class:"action-btn primary-btn",onClick:k(t=>b.goToOrderDetail(e),["stop"])},{default:d(()=>[c(O,{class:"btn-text"},{default:d(()=>[m("Êü•ÁúãËØ¶ÊÉÖ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):(l(),r(h,{key:1,class:"empty-order"},{default:d(()=>[c(h,{class:"empty-icon"},{default:d(()=>[m("üìã")]),_:1}),c(O,{class:"empty-text"},{default:d(()=>[m("ÊöÇÊó†ËÆ¢Âçï")]),_:1}),c(O,{class:"empty-desc"},{default:d(()=>[m("Âø´ÂéªÁÇπÈ§ê‰∏ãÂçïÂêß")]),_:1}),c(h,{class:"go-menu-btn",onClick:b.goToMenu},{default:d(()=>[c(O,{class:"go-menu-text"},{default:d(()=>[m("ÂéªÁÇπÈ§ê")]),_:1})]),_:1},8,["onClick"])]),_:1}))]),_:1})}],["__scopeId","data-v-6438ea9d"]]);export{O as default};
