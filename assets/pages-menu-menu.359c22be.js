import{h as a,n as t,o as e,c as s,w as r,i as c,b as l,d as o,e as n,r as d,F as i,t as u,j as m,I as h,f as y,S as f,k as C,g}from"./index-69b6f7cc.js";import{c as _,s as p,a as I}from"./menu.00631a9d.js";import{S as w}from"./storage.1da4c71f.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";const K=k({data:()=>({categories:_,currentCategory:1,searchKeyword:"",displayItems:[],cart:[],cartCount:0}),onLoad(){this.loadMenuItems(),this.loadCart()},onShow(){this.loadCart()},methods:{loadMenuItems(){this.searchKeyword?this.displayItems=p(this.searchKeyword):this.displayItems=I(this.currentCategory)},selectCategory(a){this.currentCategory=a,this.searchKeyword="",this.loadMenuItems()},onSearch(){this.searchKeyword.trim()?(this.displayItems=p(this.searchKeyword),this.currentCategory=0):(this.currentCategory=1,this.loadMenuItems())},getCurrentCategoryName(){if(this.searchKeyword)return`搜索 "${this.searchKeyword}"`;const a=this.categories.find(a=>a.id===this.currentCategory);return a?a.name:""},addToCart(t){let e=w.getCart();const s=e.find(a=>a.id===t.id);s?s.quantity+=1:e.push({...t,quantity:1}),w.saveCart(e),this.loadCart(),a({title:"已加入购物车",icon:"success",duration:1500})},loadCart(){const a=w.getCart();this.cart=a,this.cartCount=a.reduce((a,t)=>a+t.quantity,0)},goToCart(){t({url:"/pages/cart/cart"})}}},[["render",function(a,t,_,p,I,w){const k=h,K=c,x=y,b=f,j=g;return e(),s(K,{class:"container"},{default:r(()=>[l(K,{class:"search-section"},{default:r(()=>[l(K,{class:"search-box"},{default:r(()=>[l(k,{class:"search-input",type:"text",placeholder:"搜索菜品...",modelValue:I.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=a=>I.searchKeyword=a),onInput:w.onSearch},null,8,["modelValue","onInput"]),l(K,{class:"search-icon"},{default:r(()=>[o("🔍")]),_:1})]),_:1})]),_:1}),l(K,{class:"main-content"},{default:r(()=>[l(K,{class:"category-sidebar"},{default:r(()=>[l(b,{class:"category-scroll","scroll-y":"true"},{default:r(()=>[(e(!0),n(i,null,d(I.categories,a=>(e(),s(K,{class:C(["category-item",{active:I.currentCategory===a.id}]),key:a.id,onClick:t=>w.selectCategory(a.id)},{default:r(()=>[l(x,{class:"category-icon"},{default:r(()=>[o(u(a.icon),1)]),_:2},1024),l(x,{class:"category-name"},{default:r(()=>[o(u(a.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),l(K,{class:"menu-content"},{default:r(()=>[l(b,{class:"menu-scroll","scroll-y":"true"},{default:r(()=>[l(K,{class:"category-title"},{default:r(()=>[l(x,null,{default:r(()=>[o(u(w.getCurrentCategoryName()),1)]),_:1})]),_:1}),l(K,{class:"menu-list"},{default:r(()=>[(e(!0),n(i,null,d(I.displayItems,a=>(e(),s(K,{class:"menu-item",key:a.id},{default:r(()=>[l(j,{class:"menu-image",src:a.image,mode:"aspectFill"},null,8,["src"]),l(K,{class:"menu-info"},{default:r(()=>[l(x,{class:"menu-name"},{default:r(()=>[o(u(a.name),1)]),_:2},1024),l(x,{class:"menu-desc"},{default:r(()=>[o(u(a.description),1)]),_:2},1024),l(K,{class:"menu-bottom"},{default:r(()=>[l(x,{class:"menu-price"},{default:r(()=>[o("￥"+u(a.price),1)]),_:2},1024),l(K,{class:"add-cart-btn",onClick:t=>w.addToCart(a)},{default:r(()=>[l(x,{class:"add-text"},{default:r(()=>[o("加入购物车")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),I.cartCount>0?(e(),s(K,{key:0,class:"cart-float",onClick:w.goToCart},{default:r(()=>[l(K,{class:"cart-icon"},{default:r(()=>[o("🛒")]),_:1}),l(K,{class:"cart-count"},{default:r(()=>[o(u(I.cartCount),1)]),_:1}),l(x,{class:"cart-text"},{default:r(()=>[o("查看购物车")]),_:1})]),_:1},8,["onClick"])):m("",!0)]),_:1})}],["__scopeId","data-v-cec707c7"]]);export{K as default};
